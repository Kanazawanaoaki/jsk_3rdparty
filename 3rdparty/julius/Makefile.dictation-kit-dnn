# -*- makefile -*-

all: installed.dict.dnn

GIT_REVISION = v4.4
GIT_URL = "https://github.com/julius-speech/dictation-kit.git"
GIT_DIR = build/dictation-kit-$(GIT_REVISION)-dnn
GIT_PATCH =
include $(shell rospack find mk)/git_checkout.mk

# We create dnn directory not to interfere with Makefile.dictation-kit
INSTALL_DIR = `rospack find julius`/dnn

# We do not install bin directory (dictation-kit's julius executable)
# so that `rosrun julius julius` can be unique executable
installed.dict.dnn: $(GIT_DIR) patched
	cd $(GIT_DIR) && git lfs pull
	if [ ! -d $(INSTALL_DIR) ]; then mkdir $(INSTALL_DIR); fi
	rsync -a $(GIT_DIR)/model/ $(INSTALL_DIR)/model
	rsync -a $(GIT_DIR)/*conf $(INSTALL_DIR)
	touch installed.dict.dnn

clean:
	rm -rf $(GIT_DIR)
	rm -rf $(INSTALL_DIR)
	rm -rf installed.dict.dnn
